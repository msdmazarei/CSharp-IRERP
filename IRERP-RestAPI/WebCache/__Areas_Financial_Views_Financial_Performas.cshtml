/*********IRERPOTHRCTLID-START:f68cf7f0740a41a4a27b46c9c0ea1b91********************/irerp.RestDataSource.create({dataURL:"/Financial/Financial/DataSource/UserFinancial/AllPerforma",ID:"___MSD_HTTP_REQ_CHG__UserPerformaDs",dataFormat:"json",operationBindings:[
     {operationType:"fetch", dataProtocol:"getParams"},
     {operationType:"add", dataProtocol:"postParams"},
     {operationType:"remove", dataProtocol:"getParams", requestProperties:{httpMethod:"DELETE"}},
     {operationType:"update", dataProtocol:"postParams", requestProperties:{httpMethod:"PUT"}}
   ],handleError:IRERPDS_handleError,fields:[{hidden:false,name:"PerformaNumber",primaryKey:false,required:false,title:"شماره پیش فاکتور",type:"text"},{hidden:false,name:"PerformaDate",primaryKey:false,required:false,title:"تاریخ پیش فاکتور",type:"text"},{hidden:false,name:"PersianPerformaDate",primaryKey:false,required:false,title:"PersianPerformaDate",type:"text"},{hidden:false,name:"Months",primaryKey:false,required:false,title:"مدت زمان سرویس",type:"text"},{hidden:false,name:"SetupFee",primaryKey:false,required:false,title:"وضعیت سرویس",type:"text"},{hidden:false,name:"DiscountPercentage",primaryKey:false,required:false,title:"درصد تخفیف",type:"text"},{hidden:false,name:"Payable",primaryKey:false,required:false,title:"Payable",type:"text"},{hidden:false,name:"Discount_Rials",primaryKey:false,required:false,title:"درصد تخفیف",type:"text"},{hidden:false,name:"Status",primaryKey:false,required:false,title:"وضعیت سرویس",type:"text"},{hidden:false,name:"PerformaType",primaryKey:false,required:false,title:"نوع سرویس",type:"text"},{hidden:false,name:"id",primaryKey:false,required:false,title:"شماره پیش فاکتور",type:"text"},{hidden:false,name:"Service___ServiceName",primaryKey:false,required:false,title:"نام سرویس",type:"text"},{hidden:true,name:"Service___ServiceID",primaryKey:false,required:false,title:"ServiceID",type:"text"},{hidden:false,name:"User___DisplayName",primaryKey:false,required:false,title:"نام مشترک",type:"text"},{hidden:false,name:"User___Email",primaryKey:false,required:false,title:"ایمیل مشترک",type:"text"},{hidden:true,name:"User___UserID",primaryKey:false,required:false,title:"UserID",type:"text"}]});irerp.RestDataSource.create({dataURL:"/Financial/Financial/DataSource/General/allGigTariff",ID:"___MSD_HTTP_REQ_CHG__TrafficDS",dataFormat:"json",operationBindings:[
     {operationType:"fetch", dataProtocol:"getParams"},
     {operationType:"add", dataProtocol:"postParams"},
     {operationType:"remove", dataProtocol:"getParams", requestProperties:{httpMethod:"DELETE"}},
     {operationType:"update", dataProtocol:"postParams", requestProperties:{httpMethod:"PUT"}}
   ],handleError:IRERPDS_handleError,fields:[{hidden:false,name:"GigVal",primaryKey:false,required:false,title:"GigVal",type:"text"},{hidden:false,name:"PerGig",primaryKey:false,required:false,title:"PerGig",type:"text"},{hidden:false,name:"Id",primaryKey:false,required:false,title:"Id",type:"text"}]});irerp.RestDataSource.create({dataURL:"/Financial/Financial/DataSource/General/allService",ID:"___MSD_HTTP_REQ_CHG__ServiceDS",dataFormat:"json",operationBindings:[
     {operationType:"fetch", dataProtocol:"getParams"},
     {operationType:"add", dataProtocol:"postParams"},
     {operationType:"remove", dataProtocol:"getParams", requestProperties:{httpMethod:"DELETE"}},
     {operationType:"update", dataProtocol:"postParams", requestProperties:{httpMethod:"PUT"}}
   ],handleError:IRERPDS_handleError,fields:[{hidden:false,name:"ServiceName",primaryKey:false,required:false,title:"نام سرویس",type:"text"},{hidden:false,name:"ServiceSpeed",primaryKey:false,required:false,title:"سرعت",type:"text"},{hidden:false,name:"Tariff",primaryKey:false,required:false,title:"حجم",type:"text"},{hidden:false,name:"ImageSrc",primaryKey:false,required:false,title:"حجم",type:"text"},{hidden:true,name:"ServiceID",primaryKey:true,required:false,title:"ServiceID",type:"text"}]});irerp.RestDataSource.create({dataURL:"/Financial/Financial/DataSource/SupportUser_Overview/AllUsers",ID:"___MSD_HTTP_REQ_CHG__UserSupportDs",dataFormat:"json",operationBindings:[
     {operationType:"fetch", dataProtocol:"getParams"},
     {operationType:"add", dataProtocol:"postParams"},
     {operationType:"remove", dataProtocol:"getParams", requestProperties:{httpMethod:"DELETE"}},
     {operationType:"update", dataProtocol:"postParams", requestProperties:{httpMethod:"PUT"}}
   ],handleError:IRERPDS_handleError,fields:[{hidden:false,name:"DisplayName",primaryKey:false,required:false,title:"نام مشترک",type:"text"},{hidden:false,name:"Email",primaryKey:false,required:false,title:"ایمیل مشترک",type:"text"},{hidden:true,name:"UserID",primaryKey:true,required:false,title:"UserID",type:"text"}]});isc.Window.create({ID:"delwin___MSD_HTTP_REQ_CHG__frmInformation",height:"10%",width:"20%",showResizeBar:true,members:[],autoSize:true,autoCenter:true,isModal:true,showModalMask:true,canDragResize:true,items:[isc.DynamicForm.create({height:"10%",width:"20%",margin:10,numCols:2,fields:[{defaultValue:"آیا برای حذف مورد  انتخاب شده اطمینان دارد؟",type:"header"}]}),isc.HLayout.create({height:"100%",width:"100%",members:[isc.Label.create({width:"5%"}),isc.Button.create({click: "GeneralDelete(delwin___MSD_HTTP_REQ_CHG__frmInformation,___MSD_HTTP_REQ_CHG__frmInformation,___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"بله"}),isc.Label.create({width:"0%"}),isc.Button.create({click: "GeneralReturn(delwin___MSD_HTTP_REQ_CHG__frmInformation,___MSD_HTTP_REQ_CHG__frmInformation,___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"خیر"}),isc.Label.create({width:"5%"}),]})],showMaximizeButton :true});isc.Window.create({ID:"win___MSD_HTTP_REQ_CHG__frmInformation",height:"30%",width:"30%",showResizeBar:true,members:[],autoSize:true,autoCenter:true,isModal:true,showModalMask:true,canDragResize:true,items:[isc.DynamicForm.create({ID:"___MSD_HTTP_REQ_CHG__frmInformation",dataSource:___MSD_HTTP_REQ_CHG__UserPerformaDs,fields:[{name:"PerformaNumber",title:"شماره پیش فاکتور",required:false,type:"text"},{name:"PerformaDate",title:"تاریخ پیش فاکتور",required:false,type:"text"},{name:"PersianPerformaDate",title:"PersianPerformaDate",required:false,type:"text"},{name:"Months",title:"مدت زمان سرویس",required:false,type:"text"},{name:"SetupFee",title:"وضعیت سرویس",required:false,type:"text"},{name:"DiscountPercentage",title:"درصد تخفیف",required:false,type:"text"},{name:"Payable",title:"Payable",required:false,type:"text"},{name:"Discount_Rials",title:"درصد تخفیف",required:false,type:"text"},{name:"Status",title:"وضعیت سرویس",required:false,type:"text"},{name:"PerformaType",title:"نوع سرویس",required:false,type:"text"},{name:"id",title:"شماره پیش فاکتور",required:false,type:"text"},{name:"Service___ServiceName",title:"نام سرویس",required:false,type:"text"},{name:"User___DisplayName",title:"نام مشترک",required:false,type:"text"},{name:"User___Email",title:"ایمیل مشترک",required:false,type:"text"}]}),isc.HLayout.create({height:"100%",width:"100%",members:[isc.Label.create({width:"5%"}),isc.Button.create({click: "GeneralSave(win___MSD_HTTP_REQ_CHG__frmInformation,___MSD_HTTP_REQ_CHG__frmInformation,___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"ذخیره"}),isc.Label.create({width:"0%"}),isc.Button.create({click: "GeneralReturn(win___MSD_HTTP_REQ_CHG__frmInformation,___MSD_HTTP_REQ_CHG__frmInformation,___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"بازگشت"}),isc.Label.create({width:"5%"}),]})],showMaximizeButton :true});isc.Window.create({ID:"___MSD_HTTP_REQ_CHG__AddTrafficwindow",height:"15%",width:"30%",showResizeBar:true,members:[],title:"Addtraffic",autoSize:true,autoCenter:true,isModal:true,showModalMask:true,canDragResize:true,items:[isc.DynamicForm.create({ID:"___MSD_HTTP_REQ_CHG__AddTrafficForm",height:"30%",width:"30%",margin:10,numCols:2,fields:[{name:"User___UserID",width:"200",allowExpressions:true,displayField:"DisplayName",ID:"___MSD_HTTP_REQ_CHG__selectUser1",pickListWidth:400,title:"نام مشترک",optionDataSource:"___MSD_HTTP_REQ_CHG__UserSupportDs",type:"irerpSelectItem",autoFetchData:true,valueField:"UserID",pickListProperties:{members:[],showFilterEditor:true,filterOnKeypress:true,fetchDelay:1000,allowFilterExpressions:true},pickListFields:[{name:"DisplayName"},{name:"Email"}]},{name:"Invoice",width:"200",allowExpressions:true,displayField:"GigVal",ID:"___MSD_HTTP_REQ_CHG__selectTraffic",pickListWidth:400,title:"نوع حجم",optionDataSource:"___MSD_HTTP_REQ_CHG__TrafficDS",type:"irerpSelectItem",autoFetchData:true,valueField:"Id",pickListProperties:{members:[],showFilterEditor:true,filterOnKeypress:true,fetchDelay:1000,allowFilterExpressions:true},pickListFields:[{name:"GigVal"}]}]}),isc.HLayout.create({height:"100%",width:"100%",members:[isc.Label.create({width:"5%"}),isc.Button.create({click:function (){callServerMethod('/Financial/Financial/TrafficPerforma',{Traffic:___MSD_HTTP_REQ_CHG__selectTraffic.getValue(),user:___MSD_HTTP_REQ_CHG__selectUser1.getValue()} ,function(d,t,jq,addi){

if(t=='success')
{
    var msg = FromJson(d);
    if(msg.Success==true){
alert('پیش فاکتور حجم صادر شد');
addi.Win.hide();
DVS_refresh(addi.Grid.ID);
    } else
    {
    alert(msg.Error);
        }
} else
{
//Ajax Error
alert('لطفا از اتصال خود مطمئن شوید');
}
}, 'POST',{Win:___MSD_HTTP_REQ_CHG__AddTrafficwindow, Grid:___MSD_HTTP_REQ_CHG__AccountInformationGrid}); },title:"ارسال"}),isc.Label.create({width:"0%"}),isc.Button.create({click: "GeneralReturn(___MSD_HTTP_REQ_CHG__AddTrafficwindow,___MSD_HTTP_REQ_CHG__AddTrafficForm,___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"بازگشت"}),isc.Label.create({width:"5%"}),]})],showMaximizeButton :true});isc.Window.create({ID:"___MSD_HTTP_REQ_CHG__Addservicewindow",height:"20%",width:"30%",showResizeBar:true,members:[],title:"Addservice",autoSize:true,autoCenter:true,isModal:true,showModalMask:true,canDragResize:true,items:[isc.DynamicForm.create({ID:"___MSD_HTTP_REQ_CHG__AddserviceForm",height:"30%",width:"30%",margin:10,numCols:2,dataSource:___MSD_HTTP_REQ_CHG__UserPerformaDs,fields:[{name:"User___UserID",width:"200",allowExpressions:true,displayField:"DisplayName",ID:"___MSD_HTTP_REQ_CHG__selectUser",pickListWidth:400,title:"نام مشترک",optionDataSource:"___MSD_HTTP_REQ_CHG__UserSupportDs",type:"irerpSelectItem",autoFetchData:true,valueField:"UserID",pickListProperties:{members:[],showFilterEditor:true,filterOnKeypress:true,fetchDelay:1000,allowFilterExpressions:true},pickListFields:[{name:"DisplayName"},{name:"Email"}]},{name:"Service___ServiceID",width:"200",allowExpressions:true,displayField:"ServiceName",ID:"___MSD_HTTP_REQ_CHG__selectDervice",pickListWidth:400,title:"نام سرویس",optionDataSource:"___MSD_HTTP_REQ_CHG__ServiceDS",type:"irerpSelectItem",autoFetchData:true,valueField:"ServiceID",pickListProperties:{members:[],showFilterEditor:true,filterOnKeypress:true,fetchDelay:1000,allowFilterExpressions:true},pickListFields:[{name:"ServiceName"}]},{valueMap:{"1":"یک ماهه","3":"سه ماهه","6":"شش ماهه","12":"یک ساله"},ID:"___MSD_HTTP_REQ_CHG__CbMonth",title:"دوره اشتراک",type:"comboBox"}]}),isc.HLayout.create({height:"100%",width:"100%",members:[isc.Label.create({width:"5%"}),isc.Button.create({click:function (){callServerMethod('/Financial/Financial/ServicePerforma',{service:___MSD_HTTP_REQ_CHG__selectDervice.getValue(),user:___MSD_HTTP_REQ_CHG__selectUser.getValue(),month:___MSD_HTTP_REQ_CHG__CbMonth.getValue()} ,function(d,t,jq,addi){

if(t=='success')
{
    var msg = FromJson(d);
    if(msg.Success==true){
alert('پیش فاکتور سرویس صادر شد');
addi.Win.hide();
DVS_refresh(addi.Grid.ID);
    } else
    {
    alert(msg.Error);
        }
} else
{
//Ajax Error
alert('لطفا از اتصال خود مطمئن شوید');
}

}, 'POST', {Win:___MSD_HTTP_REQ_CHG__Addservicewindow, Grid:___MSD_HTTP_REQ_CHG__AccountInformationGrid}); },title:"ارسال"}),isc.Label.create({width:"0%"}),isc.Button.create({click: "GeneralReturn(___MSD_HTTP_REQ_CHG__Addservicewindow,___MSD_HTTP_REQ_CHG__AddserviceForm,___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"بازگشت"}),isc.Label.create({width:"5%"}),]})],showMaximizeButton :true});/*********IRERPOTHRCTLID-FINISH:f68cf7f0740a41a4a27b46c9c0ea1b91********************//*********IRERPDISPCTLID-START:f68cf7f0740a41a4a27b46c9c0ea1b91********************/isc.VLayout.create({members:[isc.ToolStrip.create({width:"100%",members:[isc.ToolStripButton.create({ID:"___MSD_HTTP_REQ_CHG__frmInformationRefresh",height:"100%",click: "DVS_refresh('___MSD_HTTP_REQ_CHG__AccountInformationGrid')" ,title:"بارگذاری مجدد",icon:"/Images/1377512645_button_blue_repeat.png",actionType:"button"}),isc.ToolStripButton.create({ID:"___MSD_HTTP_REQ_CHG__frmInformationEditHilits",height:"100%",click: "EditHiliting(___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"برجسته سازی",icon:"/Images/1377606892_preferences-desktop-color.png",actionType:"button"}),isc.ToolStripButton.create({ID:"___MSD_HTTP_REQ_CHG__frmInformationFormulaBuilder",height:"100%",click: "FormulaBuilders(___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"افزودن فیلد",icon:"/Images/1377606642_server_add.png",actionType:"button"}),isc.ToolStripButton.create({ID:"___MSD_HTTP_REQ_CHG__AddPerforma",height:"100%",click: "GeneralAdd(___MSD_HTTP_REQ_CHG__Addservicewindow,___MSD_HTTP_REQ_CHG__AddserviceForm,___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"درج پیش فاکتور سرویس ",actionType:"button"}),isc.ToolStripButton.create({ID:"___MSD_HTTP_REQ_CHG__AddTraffic",height:"100%",click: "GeneralAdd(___MSD_HTTP_REQ_CHG__AddTrafficwindow,___MSD_HTTP_REQ_CHG__AddTrafficForm,___MSD_HTTP_REQ_CHG__AccountInformationGrid)" ,title:"درج پیش فاکتور حجم",actionType:"button"}),]}),isc.irerpListGrid.create({ID:"___MSD_HTTP_REQ_CHG__AccountInformationGrid",height:"100%",width:"100%",members:[],autoFetchData:true,dataSource:___MSD_HTTP_REQ_CHG__UserPerformaDs,alternateRecordStyles:true,showFilterEditor:true,filterOnKeypress:true,fetchDelay:1000,allowFilterExpressions:true,canAddFormulaFields:true,canAddSummaryFields:true,canEdit:false,rowEditorExit: "IRERPLG_rowEditorExit(editCompletionEvent, record, newValues, rowNum,this)" ,wrapCells:true,showHover:true,fields:[{name:"PerformaNumber"},{name:"PerformaDate",showIf:"return false;"},{name:"PersianPerformaDate",title :"تاریخ صدور"},{name:"Service___ServiceName"},{name:"Months"},{name:"DiscountPercentage",title :"تخفیف"},{name:"Payable",canFilter:false,canSort:false,title :"مبلغ کل"},{name:"Status",valueMap:{"2":"تسویه شده","1":"تسویه نشده","3":"لغو در مرحله پیش فاکتور","4":"لغو در مرحله فاکتور"}},{name:"PerformaType",valueMap:{"2":"حجم","1":"سرویس"},title :"نوع پیش فاکتور"},{name:"User___Email"},{name:"User___DisplayName"}]}),]});/*********IRERPDISPCTLID-FINISH:f68cf7f0740a41a4a27b46c9c0ea1b91********************//*********IRERPCMMDCTLID-START:f68cf7f0740a41a4a27b46c9c0ea1b91********************/win___MSD_HTTP_REQ_CHG__frmInformation.hide();delwin___MSD_HTTP_REQ_CHG__frmInformation.hide();___MSD_HTTP_REQ_CHG__AddTrafficwindow.hide();___MSD_HTTP_REQ_CHG__Addservicewindow.hide();/*********IRERPCMMDCTLID-FINISH:f68cf7f0740a41a4a27b46c9c0ea1b91********************/