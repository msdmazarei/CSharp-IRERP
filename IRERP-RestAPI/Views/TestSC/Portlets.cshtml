@using IRERP_RestAPI.Bases.Extension.HTML;
@using IRERP_RestAPI.Bases.Extension.HTML.Controls;
@using IRERP_RestAPI.Bases.Extension.HTML.Controls.Types;

 @{
        string Sabz = "#6f9e10";
        string Sorkh = "#fc4c4c";
        string Banafsh = "#9569e5";
        string Abi = "#00A6E0";
        string Orange = "#fc854B";
        string Black = "#000000";
        string White = "#ffffff";
        string portletlabelbackcolor = "#888888";
        //var ds = new IRERP_SM_DataSource();
        //ds.fields = new IRERPControlTypes_DataSourceField[] { 
        //new IRERPControlTypes_DataSourceField(){name="test",type=IRERPControlTypes_FieldType.text}};
       
     // { title = new IRERPControlTypes_HTMLString("Waiting"), showEdges = false, showHeader = false, bodyColor = Abi };


        var TraficGrafProtlet =
             new IRERP_SM_Portlet()
             {
                 showEdges = false,
                 showHeader = false,
                 items = new IRERPControlBase[]{
             new IRERP_SM_Chart()
             {
                 ID="chartid",
                 width="100%",height="100%"
             }   
            }
             };
             
          
        
        var SendSMSProtlet = new IRERP_SM_Portlets()
        {

            /*title = new IRERPControlTypes_HTMLString(" SendSMS"), showEdges = false, 
            showHeader = false, bodyColor = Banafsh, click = new IRERPControlTypes_StringMethods("alert(\"Hello\");") */
        };

        string _tmp = "";
      
       
      
        
        var PColRight = new IRERP_SM_Portlets()
        {
            Portlets = new IRERPControlBase[]{ 
                
            IRERP_SM_Portlets.GetRow( new IRERP_SM_FromString(
                    Html.Partial("Portlets/petiakArm")
                    ),new IRERP_SM_FromString(
                    Html.Partial("Portlets/Date")
                    )) ,
           
           
                      IRERP_SM_Portlets.GetRow( new IRERP_SM_FromString(
                    Html.Partial("Portlets/Waiting")
                    ) , new IRERP_SM_FromString(
                    Html.Partial("Portlets/SMS")
                    ) ),
                    //  ServiceValidBondPortlet
                    
                    new IRERP_SM_FromString(
                    Html.Partial("Portlets/ServiceValidBond")
                    )
         }
        };
        var PColCenter = new IRERP_SM_Portlets()
        {
            Portlets = new IRERPControlBase[]{
               
                new IRERP_SM_FromString(
                    Html.Partial("Portlets/UserCurrentService")
                    )
        ,
                //UserCurrentServicePortlet,
            IRERP_SM_Portlets.GetRow( new IRERP_SM_FromString(
                    Html.Partial("Portlets/Balans")
                    ),  new IRERP_SM_FromString(
                    Html.Partial("Portlets/ReminingTrafic")
                    ),new IRERP_SM_FromString(
                    Html.Partial("Portlets/ReminingDay")
                    ) ),
           new IRERP_SM_FromString(
                    Html.Partial("Portlets/UserPropertis")
                    )
                
            }
        };
        var PColLeft = new IRERP_SM_Portlets()
        {
            Portlets = new IRERPControlBase[]{
                    //  new IRERP_SM_FromString(
                    //Html.Partial("Portlets/TraficGraf")
                    //)
                   TraficGrafProtlet ,new IRERP_SM_FromString(
                    Html.Partial("Portlets/Opinion")
                    ),
                     IRERP_SM_Portlets.GetRow( new IRERP_SM_FromString(
                    Html.Partial("Portlets/BuyService")
                    ),  new IRERP_SM_FromString(
                    Html.Partial("Portlets/BuyCapacity")
                    ),new IRERP_SM_FromString(
                    Html.Partial("Portlets/FinancialRecord")
                    ) ),
                    
             }
        };
        var portal = new IRERP_SM_PortalLayout()
        {
            showColumnMenus = false,
            width = "100%",
            height = "100%",
            ID="mainPortal",
            canResizeColumns = false,
            showResizeBar = false,
            preventColumnUnderflow = false,
            columnBorder = 0,
            margin = 10
        };
        portal.portlets = IRERP_SM_Portlets.GetRow(PColRight, PColCenter, PColLeft);


        //Page Spliter
        string TopSectionBackGroundColor = "#EFEFEF";

        var PetiakLabel_TOP = new IRERP_SM_Label()
        {
            contents = new IRERPControlTypes_HTMLString("شرکت پتیاک سیستم"),
            width = "25%",
            backgroundColor = TopSectionBackGroundColor,
            baseStyle = "Brand",
            shadowDepth = 5,
            height = "100%",
            padding = 10

        };
        var CustomerPage = new IRERP_SM_Label()
        {
            contents = new IRERPControlTypes_HTMLString("صفحه مشترکین"),
            width = "25%",
            height = "100%",
            backgroundColor = TopSectionBackGroundColor,
            baseStyle = "slogan",
            align = IRERPControlTypes_Alignment.center,
            padding = 10

        };

        var ToolBarMenus =
          
            new IRERP_SM_Label()
            {
                contents = new IRERPControlTypes_HTMLString("تلفن پشتیبانی 2349"),
                width = "25%",
                height = "100%",
                backgroundColor = TopSectionBackGroundColor,
                align = IRERPControlTypes_Alignment.center,
                baseStyle = "slogan",
                //align = IRERPControlTypes_Alignment.left
            };// (IRERP_SM_Label)PetiakLabel_TOP.Clone();*/
        var UserPicture =
            new IRERP_SM_Label()
            {
                contents = new IRERPControlTypes_HTMLString("شرکت پتیاک سیستم"),
                width = "25%",
                height = "100%",
                backgroundColor = TopSectionBackGroundColor,

                //  align = IRERPControlTypes_Alignment.left
            };
        //(IRERP_SM_Label)PetiakLabel_TOP.Clone();
        var top =
            new IRERP_SM_HLayout()
            {
                members = new IRERPControlBase[] {
                    PetiakLabel_TOP,CustomerPage,ToolBarMenus,UserPicture
                },
                width = "100%",
                height = "50px",
                showShadow = true,
                shadowDepth = 5

            };
        var bottom = new IRERP_SM_Label() { contents = new IRERPControlTypes_HTMLString("Top_Layout")/*, height = "100%", width = "100%" */};
        bottom.contents = new IRERPControlTypes_HTMLString("Bottom_Layout");


        var mainLayout = new IRERP_SM_VLayout()
        {
            ID="mainLayout",
            members = new IRERPControlBase[]{
                top,portal,bottom
            },
            height = "100%",
            width = "100%"


        };


      

        var body = mainLayout;
            

    }
    @Html.Raw(_tmp+portal.ToString())
    @Html.Raw("/*********************SCRIPTSECTION*******************/")
    @Html.Raw(@" 
        chartid.dataRenderer = function () {
        var _rtn = [[], []];
        for (var i = 0; i < 30; i++) {
            if (chartid.dta != null) {
                var dat = chartid.dta[i].DateInserted;
                dat = dat.replace('T', ' ');
                _rtn[0].push([dat, chartid.dta[i].BytesOut]);
                _rtn[1].push([dat, chartid.dta[i].BytesIn]);
            }
            else
                _rtn[0].push([0, 0]);
        }
        return _rtn;
    }
    UserConHst.fetchData(
        null,
        function (dsResponse, data, dsRequest) {
            var res = dsResponse;
            chartid.dta = data;
            chartid.replot();
        });");